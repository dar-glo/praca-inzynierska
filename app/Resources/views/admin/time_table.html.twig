{% block title %}Terminarz{% endblock %}
{% extends 'base.html.twig' %}

{% block body %}
    <h1>Terminarz</h1>
    {% if timeTable is not empty %}
    <table>
	<tr>
	    <td>Sala</td>
	    <td>Godzina</td>
	    <td>Dzień tygodnia</td>
	    <td>Kto co</td>
	    <td>Klasa</td>
	    <td>Typ</td>
	    <td>Początek</td>
	    <td>Koniec</td>
	    <td>Opis</td>
	    <td>Edytuj</td>
	    <td>Usuń</td>
	</tr>
	{% for i in 0..timeTable|length-1 %}
	    <tr>
		<td>{{ timeTable[i].sala.nrSali }}</td>
		<td>{{ timeTable[i].godzina.poczatek|date("G:i") }}</td>
		<td>{{ timeTable[i].dzienTygodnia }}</td>
		<td>
		    {{ timeTable[i].ktoCo.przedmiot.nazwa }} - 
		    {{ timeTable[i].ktoCo.prowadzacy.imie }} {{ timeTable[i].ktoCo.prowadzacy.nazwisko }}
		</td>
		<td>{{ timeTable[i].klasa.poziom }}{{ timeTable[i].klasa.klasa }}</td>
		<td>{{ timeTable[i].typ }}</td>
		<td>{{ timeTable[i].poczatek|date("Y-m-d") }}</td>
		<td>{{ timeTable[i].koniec|date("Y-m-d") }}</td>
		<td>{{ timeTable[i].opis }}</td>
		<td><a href="{{ url('time_table',{'id':timeTable[i].id} ) }}">edytuj</a></td>
		<td><a href="{{ url('time_table',{'id':timeTable[i].id,'delete':1} ) }}">usuń</a></td>
	    </tr>
	{% endfor %}
    </table>
    {% else %}
	brak
    {% endif %}
    <br>
    Plan lekcji: 
    <select onchange="location=this.value;">
	<option value="{{url('time_table')}}">Wybierz klasę</option>
	{% for class in classes %}
	<option value="{{url('time_table',{'numberClass':class.poziom,'class':class.klasa})}} ">
	    {{class.poziom}}{{class.klasa}}</option>
	{% endfor %}
    </select>
    {% if lessons is not empty %}
	<h2>Klasa {{ app.request.get('numberClass') }}{{ app.request.get('class') }}</h2>
	<table>
	    <tr>
		<td>Godz.</td>
		<td>Poniedziałek</td>
		<td>Wtorek</td>
		<td>Środa</td>
		<td>Czwartek</td>
		<td>Piątek piąteczek piątunio</td>
		<td>Sobota</td>
	    </tr>
	    {% for i in 0..lessonHours|length-1 %}
		<tr>
		    <td>
			{{ lessonHours[i].poczatek|date('H:i') }} - 
			{{ lessonHours[i].poczatek|date_modify("+45 min")|date('H:i') }}
		    </td>
		    <td>
			{% if lessons[i]['poniedzialek'] is not null %}
			    {{ lessons[i]['poniedzialek'].ktoCo.przedmiot.nazwa }}
			    {#<br>
			    <a href="{{ url('time_table',{'id':lessons[i]['poniedzialek'].id} ) }}">
				edytuj
			    </a>
			    /
			    <a href="{{ url('time_table',{'id':lessons[i]['poniedzialek'].id,'delete':1} ) }}">
				usuń
			    </a>#}
			{% endif %}
		    </td>
		    <td>
			{% if lessons[i]['wtorek'] is not null %}
			    {{ lessons[i]['wtorek'].ktoCo.przedmiot.nazwa }}
			{% endif %}
		    </td>
		    <td>
			{% if lessons[i]['sroda'] is not null %}
			    {{ lessons[i]['sroda'].ktoCo.przedmiot.nazwa }}
			{% endif %}
		    </td>
		    <td>
			{% if lessons[i]['czwartek'] is not null %}
			    {{ lessons[i]['czwartek'].ktoCo.przedmiot.nazwa }}
			{% endif %}
		    </td>
		    <td>
			{% if lessons[i]['piatek'] is not null %}
			    {{ lessons[i]['piatek'].ktoCo.przedmiot.nazwa }}
			{% endif %}
		    </td>
		    <td>
			{% if lessons[i]['sobota'] is not null %}
			    {{ lessons[i]['sobota'].ktoCo.przedmiot.nazwa }}
			{% endif %}
		    </td>
		</tr>
	    {% endfor %}
	</table>
	<div>
	    Info: w przypadku dwóch lub więcej terminów dla danej klasy, dnia tygodnia oraz godziny, 
	    wyświetli się najstarszy termin dla danego miejsca.
	</div>
    {% endif %}
    <h2>Dodawanie/edytowanie</h2>
    {{form(form)}}
{% endblock %}